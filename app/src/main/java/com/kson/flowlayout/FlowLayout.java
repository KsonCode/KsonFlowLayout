package com.kson.flowlayout;import android.content.Context;import android.util.AttributeSet;import android.util.Log;import android.view.View;import android.view.ViewGroup;import android.widget.TextView;public class FlowLayout extends ViewGroup {//    public int mLeftMargin = 20;//    public int mTopMargin = 20;    public FlowLayout(Context context) {        super(context);    }    public FlowLayout(Context context, AttributeSet attrs) {        super(context, attrs);    }    public FlowLayout(Context context, AttributeSet attrs, int defStyleAttr) {        super(context, attrs, defStyleAttr);    }    @Override    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {        super.onMeasure(widthMeasureSpec, heightMeasureSpec);        Log.e("tag", "onMeasure");        //测量所有子view大小        measureChildren(widthMeasureSpec, heightMeasureSpec);        int leftMargin = 0;//getleft        int topMargin = 0;//总高度        int sizeWidth = MeasureSpec.getSize(widthMeasureSpec);//宽度大小        int modelWidth = MeasureSpec.getMode(widthMeasureSpec);//宽度模式        int sizeHeigth = MeasureSpec.getSize(heightMeasureSpec);//高度大小        int modelHeigth = MeasureSpec.getMode(heightMeasureSpec);//高度模式        switch (modelHeigth) {            case MeasureSpec.AT_MOST://至多模式                int measuredHeight = 0;//记录无换行高度                for (int j = 0; j < getChildCount(); j++) {//遍历所有子view                    int measuredWidth = getChildAt(j).getMeasuredWidth();//每一个view测量宽度                    measuredHeight = getChildAt(j).getMeasuredHeight();//测量高度                    if (leftMargin + measuredWidth > getMeasuredWidth()) {//换行                        leftMargin = 0;//getleft为0                        topMargin += measuredHeight;//高度累加                    }                    leftMargin += measuredWidth;//不换行时getleft                }                topMargin += measuredHeight;//不换行时总高度                break;        }        setMeasuredDimension(sizeWidth, topMargin);    }    @Override    protected void onLayout(boolean changed, int l, int t, int r, int b) {        Log.e("tag", "onLayout");        int leftMargin = 0;        int topmargin = 0;        for (int j = 0; j < getChildCount(); j++) {            int measuredHeight = getChildAt(j).getMeasuredHeight();            int measuredWidth = getChildAt(j).getMeasuredWidth();            if (leftMargin + measuredWidth > getWidth()) {                leftMargin = 0;                topmargin += measuredHeight;            }            getChildAt(j).layout(leftMargin, topmargin, measuredWidth + leftMargin, measuredHeight + topmargin);            leftMargin += measuredWidth;        }    }}